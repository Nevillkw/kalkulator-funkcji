<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywny Kalkulator Funkcji ‚Äî wykresy 2D/3D, ca≈Çki i analiza (Plotly, JS)</title>
    <meta name="description" content="Rysuj wykresy funkcji (2D/3D), licz ca≈Çki oznaczone, pola i d≈Çugo≈õci krzywych. Tryby: kartezja≈Ñski, parametryczny, biegunowy. Dzia≈Ça na telefonie, obs≈Çuguje œÄ. Kod na GitHub.">
    <link rel="canonical" href="https://nevillkw.github.io/kalkulator-funkcji/">
    <meta property="og:title" content="Interaktywny Kalkulator Funkcji ‚Äî wykresy 2D/3D, ca≈Çki i analiza">
    <meta property="og:description" content="Wykresy 2D/3D, ca≈Çki i pola, obszar miƒôdzy krzywymi, tryby parametryczny i biegunowy. Mobile fullscreen, œÄ w granicach, start 10√ó10.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nevillkw.github.io/kalkulator-funkcji/">
    <meta property="og:image" content="https://nevillkw.github.io/kalkulator-funkcji/favicon.svg">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Interaktywny Kalkulator Funkcji ‚Äî wykresy 2D/3D, ca≈Çki i analiza">
    <meta name="twitter:description" content="Wykresy 2D/3D, ca≈Çki i pola, obszar miƒôdzy krzywymi, tryby parametryczny i biegunowy. Mobile fullscreen, œÄ w granicach.">
    <meta name="theme-color" content="#0b5ed7">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="calculator-container">
        <div class="calculator-header">
            <h2>Kalkulator Funkcji Matematycznych</h2>
            <div class="function-input-container">
                <!-- GRUPA: Wyb√≥r trybu wykresu -->
                <fieldset class="ui-group">
                    <legend>üìä Tryb wykresu</legend>
                    <div>
                        <select id="plotMode" style="width:100%;padding:8px;font-size:14px;">
                            <option value="cartesian">Kartezja≈Ñski (y = f(x))</option>
                            <option value="parametric">Parametryczny (x(t), y(t))</option>
                            <option value="polar">Biegunowy (r(t))</option>
                            <option value="3d">Powierzchnia 3D (z = f(x,y))</option>
                        </select>
                        <div id="modeHelper" class="mode-helper"></div>
                    </div>
                </fieldset>

                <!-- GRUPA: Motyw (prze≈ÇƒÖcznik) -->
                <fieldset class="ui-group">
                    <legend>üé® Motyw</legend>
                    <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                        <input type="checkbox" id="deflatulThemeToggle"> deflatul
                    </label>
                </fieldset>

                <!-- GRUPA: Definicja funkcji -->
                <fieldset class="ui-group">
                    <legend>‚úèÔ∏è Funkcje</legend>
                <div id="cartesianInputs">
                <div class="function-row">
                    <div class="function-field">
                        <div class="color-indicator" style="background: rgb(75,192,192)"></div>
                        <div class="function-label">f‚ÇÅ(x) =</div>
                        <input type="text" id="functionInput" placeholder="Wpisz funkcjƒô u≈ºywajƒÖc zmiennej x, np. sin(x) lub x^2">
                        <!-- Inline quick presets moved next to the input to save vertical space -->
                        <div id="cartesianQuickFunctions" class="quick-functions inline-presets">
                            <span data-func="x^2">x¬≤</span>
                            <span data-func="x^3">x¬≥</span>
                            <span data-func="sin(x)">sin(x)</span>
                            <span data-func="cos(x)">cos(x)</span>
                            <span data-func="tan(x)">tan(x)</span>
                            <span data-func="sqrt(x)">‚àöx</span>
                            <span data-func="abs(x)">|x|</span>
                            <span data-func="log(x)">log(x)</span>
                            <span data-func="exp(x)">eÀ£</span>
                            <span data-func="1/x">1/x</span>
                        </div>
                        
                    </div>
                </div>
                <div class="function-row">
                    <div class="function-field">
                        <div class="color-indicator" style="background: rgb(255,99,132)"></div>
                        <div class="function-label">f‚ÇÇ(x) =</div>
                        <input type="text" id="function2Input" placeholder="Druga funkcja z x (opcjonalnie), np. cos(x)">
                        <!-- Inline presets for f2(x) -->
                        <div class="quick-functions inline-presets">
                            <span data-func="x^2">x¬≤</span>
                            <span data-func="x^3">x¬≥</span>
                            <span data-func="sin(x)">sin(x)</span>
                            <span data-func="cos(x)">cos(x)</span>
                            <span data-func="tan(x)">tan(x)</span>
                            <span data-func="abs(x)">|x|</span>
                        </div>
                        
                    </div>
                </div>
                <div class="axes-grid axes-4">
                    <div><label for="xMin" style="display:block;margin-bottom:4px;">X min:</label><input type="text" id="xMin" value="-5" style="width:100%;" placeholder="np. -2*pi"></div>
                    <div><label for="xMax" style="display:block;margin-bottom:4px;">X max:</label><input type="text" id="xMax" value="5" style="width:100%;" placeholder="np. 2*pi"></div>
                    <div><label for="yMin" style="display:block;margin-bottom:4px;">Y min:</label><input type="text" id="yMin" value="-5" style="width:100%;"></div>
                    <div><label for="yMax" style="display:block;margin-bottom:4px;">Y max:</label><input type="text" id="yMax" value="5" style="width:100%;"></div>
                </div>
                </div>
                <!-- Parametryczne i biegunowe wej≈õcia (poza blokiem kartezja≈Ñskim) -->
                <div id="parametricInputs" style="display:none;margin-bottom:8px;">
                    <div class="function-row" style="margin-bottom:6px;">
                        <div class="function-field">
                            <div class="function-label">x(t) =</div>
                            <input type="text" id="xParamInput" placeholder="R√≥wnanie dla x u≈ºywajƒÖc t, np. cos(t)">
                            <div id="parametricQuickFunctions" class="quick-functions inline-presets" style="display:none">
                                <span data-func="cos(t)">cos(t)</span>
                                <span data-func="sin(t)">sin(t)</span>
                                <span data-func="t*cos(t)">t¬∑cos(t)</span>
                                <span data-func="t*sin(t)">t¬∑sin(t)</span>
                                <span data-func="cos(2*t)">cos(2t)</span>
                                <span data-func="sin(2*t)">sin(2t)</span>
                                <span data-func="t">t</span>
                                <span data-func="t^2">t¬≤</span>
                            </div>
                        </div>
                    </div>
                    <div class="function-row" style="margin-bottom:6px;">
                        <div class="function-field">
                            <div class="function-label">y(t) =</div>
                            <input type="text" id="yParamInput" placeholder="R√≥wnanie dla y u≈ºywajƒÖc t, np. sin(t)">
                            <!-- Inline presets for y(t) -->
                            <div class="quick-functions inline-presets" style="display:none">
                                <span data-func="cos(t)">cos(t)</span>
                                <span data-func="sin(t)">sin(t)</span>
                                <span data-func="t*cos(t)">t¬∑cos(t)</span>
                                <span data-func="t*sin(t)">t¬∑sin(t)</span>
                                <span data-func="cos(2*t)">cos(2t)</span>
                                <span data-func="sin(2*t)">sin(2t)</span>
                                <span data-func="t">t</span>
                                <span data-func="t^2">t¬≤</span>
                            </div>
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px;">
                        <div><label for="tMinInput" style="display:block;margin-bottom:4px;">t min:</label><input type="text" id="tMinInput" value="-6.28" style="width:100%;" placeholder="np. -2*pi"></div>
                        <div><label for="tMaxInput" style="display:block;margin-bottom:4px;">t max:</label><input type="text" id="tMaxInput" value="6.28" style="width:100%;" placeholder="np. 2*pi"></div>
                    </div>
                </div>

                <div id="polarInputs" style="display:none;margin-bottom:8px;">
                    <div class="function-row" style="margin-bottom:6px;">
                        <div class="function-field">
                            <div class="function-label">r(t) =</div>
                            <input type="text" id="rInput" placeholder="np. 1 + 0.5 * cos(6*t)">
                            <div id="polarQuickFunctions" class="quick-functions inline-presets" style="display:none">
                                <span data-func="1+cos(t)">1+cos(t)</span>
                                <span data-func="sin(3*t)">sin(3t)</span>
                                <span data-func="t/3">spirala</span>
                                <span data-func="2*cos(t)">2cos(t)</span>
                                <span data-func="1">okrƒÖg</span>
                                <span data-func="sin(5*t)">sin(5t)</span>
                                <span data-func="1+sin(t)">1+sin(t)</span>
                                <span data-func="2+cos(4*t)">r√≥≈ºa</span>
                            </div>
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px;">
                        <div><label for="thetaMinInput" style="display:block;margin-bottom:4px;">Œ∏ min:</label><input type="text" id="thetaMinInput" value="0" style="width:100%;" placeholder="np. 0"></div>
                        <div><label for="thetaMaxInput" style="display:block;margin-bottom:4px;">Œ∏ max:</label><input type="text" id="thetaMaxInput" value="6.28" style="width:100%;" placeholder="np. 2*pi"></div>
                    </div>
                </div>
                
                <div id="3dInputs" style="display:none;margin-bottom:8px;">
                    <div class="function-row" style="margin-bottom:6px;">
                        <div class="function-field">
                            <div class="function-label">z(x,y) =</div>
                            <input type="text" id="surfaceInput" placeholder="np. sin(x)*cos(y) lub x^2 + y^2">
                            <div id="3dQuickFunctions" class="quick-functions inline-presets" style="display:none">
                                <span data-func="sin(x)*cos(y)">sin(x)cos(y)</span>
                                <span data-func="x^2 + y^2">paraboloida</span>
                                <span data-func="sin(sqrt(x^2+y^2))">fala</span>
                                <span data-func="exp(-(x^2+y^2))">Gauss</span>
                                <span data-func="sin(x)+cos(y)">sin(x)+cos(y)</span>
                                <span data-func="x*y">x¬∑y</span>
                            </div>
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;margin-top:8px;">
                        <div><label for="xMin3D" style="display:block;margin-bottom:4px;">X min:</label><input type="number" id="xMin3D" value="-5" step="0.5" style="width:100%;"></div>
                        <div><label for="xMax3D" style="display:block;margin-bottom:4px;">X max:</label><input type="number" id="xMax3D" value="5" step="0.5" style="width:100%;"></div>
                        <div><label for="yMin3D" style="display:block;margin-bottom:4px;">Y min:</label><input type="number" id="yMin3D" value="-5" step="0.5" style="width:100%;"></div>
                        <div><label for="yMax3D" style="display:block;margin-bottom:4px;">Y max:</label><input type="number" id="yMax3D" value="5" step="0.5" style="width:100%;"></div>
                    </div>
                    <div style="margin-top:8px;">
                        <label for="resolution3D" style="display:block;margin-bottom:4px;">Rozdzielczo≈õƒá:</label>
                        <input type="text" id="resolution3D" value="50" style="width:100%;" placeholder="np. 25*2">
                    </div>
                </div>
                
                </fieldset>

                <!-- GRUPA: Renderowanie -->
                <fieldset class="ui-group">
                    <legend>‚öôÔ∏è Renderowanie</legend>
                    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px;align-items:start;">
                        <div>
                            <label for="angleMode" style="display:block;margin-bottom:2px;font-weight:500;font-size:12px;">KƒÖty:</label>
                            <select id="angleMode" style="width:100%;padding:3px;font-size:12px;">
                                <option value="radians">Radiany</option>
                                <option value="degrees">Stopnie</option>
                            </select>
                        </div>
                        <div>
                            <label for="samplingPreset" style="display:block;margin-bottom:2px;font-weight:500;font-size:12px;">Dok≈Çadno≈õƒá:</label>
                            <select id="samplingPreset" style="width:100%;padding:3px;font-size:12px;">
                                <option value="default" selected>Domy≈õlna</option>
                                <option value="fast">Szybko</option>
                                <option value="quality">Precyzyjna</option>
                            </select>
                        </div>
                        <div>
                            <label style="display:flex;align-items:center;cursor:pointer;font-size:12px;margin-top:16px;">
                                <input type="checkbox" id="piAxisCheckbox" style="margin-right:4px;">O≈õ X w œÄ
                            </label>
                        </div>
                    </div>
                </fieldset>

                <button id="plotButton">Rysuj wykres</button>
            </div>
        </div>
        
        <div class="calculator-main">
            <div class="calculator-sidebar">
                <!-- GRUPA: Parametry dynamiczne -->
                <details class="ui-group sidebar-group collapsible" open>
                    <summary>üéöÔ∏è Parametry</summary>
                    <div id="paramControls" class="param-controls"></div>
                </details>
                
                <div class="controls">
                    <!-- GRUPA: Nawigacja -->
                    <details class="ui-group sidebar-group collapsible">
                        <summary>üß≠ Nawigacja</summary>
                        <div class="group-content">
                            <button id="autoFit" style="width:100%;margin-bottom:6px;font-size:12px;padding:6px;">Auto-fit</button>
                            <button id="resetView" style="width:100%;margin-bottom:8px;font-size:12px;padding:6px;">Reset widoku</button>
                            <div class="navigation-controls" aria-label="Nawigacja wykresu">
                                <span></span>
                                <button id="panUp" title="Przesu≈Ñ w g√≥rƒô" aria-label="G√≥ra">‚Üë</button>
                                <span></span>
                                <button id="panLeft" title="Przesu≈Ñ w lewo" aria-label="Lewo">‚Üê</button>
                                <button id="zoomIn" title="Przybli≈º" aria-label="Przybli≈º">+</button>
                                <button id="panRight" title="Przesu≈Ñ w prawo" aria-label="Prawo">‚Üí</button>
                                <span></span>
                                <button id="panDown" title="Przesu≈Ñ w d√≥≈Ç" aria-label="D√≥≈Ç">‚Üì</button>
                                <button id="zoomOut" title="Oddal" aria-label="Oddal">‚àí</button>
                            </div>
                        </div>
                    </details>

                    <!-- GRUPA: Analiza funkcji -->
                    <details class="ui-group sidebar-group collapsible" open>
                        <summary>üîç Analiza</summary>
                        <div class="group-content">
                            <button id="clearAnalysisButton" style="width:100%;margin-bottom:10px;font-size:12px;padding:7px;background:linear-gradient(135deg,#ff6b6b 0%,#ee5a6f 100%);color:white;" title="Wyczy≈õƒá wszystkie analizy, ca≈Çki i zacieniowania">üóëÔ∏è Wyczy≈õƒá analizy</button>
                            
                            <div class="analysis-options">
                                <label style="display:block;margin-bottom:6px;">
                                    <input type="checkbox" id="zerosCheckbox">&nbsp;üéØ Miejsca zerowe
                                </label>
                                <label style="display:block;margin-bottom:6px;">
                                    <input type="checkbox" id="extremaCheckbox">&nbsp;‚õ∞Ô∏è Ekstrema
                                </label>
                                <label style="display:block;margin-bottom:6px;">
                                    <input type="checkbox" id="inflectionsCheckbox">&nbsp;üîÑ Punkty przegiƒôcia
                                </label>
                                <div id="inflectionsQualityWrap" style="display:none;margin:4px 0 10px 22px;">
                                    <label for="inflectionsQuality" style="font-size:12px;display:block;margin-bottom:4px;">Dok≈Çadno≈õƒá przegiƒôƒá:</label>
                                    <select id="inflectionsQuality" style="width:100%;padding:6px;font-size:12px;">
                                        <option value="default" selected>Domy≈õlna</option>
                                        <option value="fast">Szybko</option>
                                        <option value="quality">Precyzyjna</option>
                                    </select>
                                </div>
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="intersectionsCheckbox">&nbsp;‚úñÔ∏è Punkty przeciƒôcia
                                </label>
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="derivativePlotCheckbox">&nbsp;üìà <span id="derivativeLabelText">Rysuj/licz pochodnƒÖ</span>
                                </label>
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="tangentToolCheckbox">&nbsp;üìê Styczna i normalna (klik w wykres)
                                </label>
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="paramClickToolCheckbox">&nbsp;„Ä∞Ô∏è Wektor styczny/normalny (klik, parametryczny)
                                </label>
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="monotonicityCheckbox">&nbsp;üìö Monotoniczno≈õƒá (zielone ro≈õnie, czerwone maleje)
                                </label>
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="concavityCheckbox">&nbsp;üúÇ Wklƒôs≈Ço≈õƒá/Wypuk≈Ço≈õƒá (f''>0 / f''<0)
                                </label>
                                
                                <label style="display:block;margin-bottom:8px;">
                                    <input type="checkbox" id="asymptotesCheckbox">&nbsp;‚ûó Asymptoty (pionowe)
                                </label>
                            </div>
                            
                            <div class="integral-controls" style="border-top:1px solid #dee2e6;padding-top:8px;">
                                <label style="display:block;margin-bottom:6px;font-weight:500;font-size:12px;"><span id="integralLabelText">Ca≈Çka oznaczona:</span></label>
                                <div style="display:flex;gap:6px;margin-bottom:6px;align-items:center;">
                                    <label for="integralA" style="font-size:12px;">a:</label>
                                    <input type="text" id="integralA" value="0" style="width:60px;padding:4px;font-size:12px;" placeholder="np. 0 lub -pi/2">
                                    <label for="integralB" style="font-size:12px;">b:</label>
                                    <input type="text" id="integralB" value="1" style="width:60px;padding:4px;font-size:12px;" placeholder="np. 1 lub pi">
                                </div>
                                <button id="calculateIntegralButton" style="width:100%;font-size:12px;padding:6px;" title="Automatycznie oblicza siƒô po zmianie granic">üìä Oblicz i zacieniuj</button>
                            </div>
                            
                            <!-- Pole miƒôdzy krzywymi (tylko kartezja≈Ñski) -->
                            <div class="between-curves-controls" style="border-top:1px solid #dee2e6;padding-top:8px;margin-top:8px;">
                                <label style="display:block;margin-bottom:6px;font-weight:500;font-size:12px;">Pole miƒôdzy krzywymi:</label>
                                <div style="display:flex;gap:6px;margin-bottom:6px;align-items:center;">
                                    <label for="betweenA" style="font-size:12px;">a:</label>
                                    <input type="text" id="betweenA" value="0" style="width:80px;padding:4px;font-size:12px;" placeholder="np. -1" title="Lewa granica przedzia≈Çu">
                                    <label for="betweenB" style="font-size:12px;">b:</label>
                                    <input type="text" id="betweenB" value="1" style="width:80px;padding:4px;font-size:12px;" placeholder="np. 1" title="Prawa granica przedzia≈Çu">
                                </div>
                                <button id="calculateBetweenButton" style="width:100%;font-size:12px;padding:6px;" title="Automatycznie oblicza siƒô po zmianie granic">üìê Oblicz i zacieniuj</button>
                            </div>
                        </div>
                    </details>
                    
                    <!-- GRUPA: Import danych -->
                    <details class="ui-group sidebar-group collapsible">
                        <summary>üî¨ Import danych</summary>
                        <div class="group-content">
                            <label for="dataInput" style="display:block;margin-bottom:4px;font-weight:500;font-size:12px;">CSV:</label>
                            <textarea id="dataInput" placeholder="x, y&#10;1, 5.2&#10;2, 8.1" style="width:100%;min-height:80px;border:1px solid #ced4da;border-radius:4px;padding:6px;font-family:'Consolas',monospace;font-size:11px;box-sizing:border-box;"></textarea>
                            
                            <div style="margin-top:6px;">
                                <label for="dataURL" style="display:block;margin-bottom:4px;font-weight:500;font-size:12px;">API URL:</label>
                                <input type="text" id="dataURL" placeholder="https://api.example.com/data.json" style="width:100%;padding:5px;border:1px solid #ced4da;border-radius:4px;box-sizing:border-box;font-size:11px;">
                            </div>
                            
                            <div class="data-buttons" style="display:flex;gap:4px;margin-top:8px;">
                                <button id="loadDataButton" style="flex:1;font-size:11px;padding:5px;">Za≈Çaduj</button>
                                <button id="fetchDataButton" style="flex:1;background:#28a745;font-size:11px;padding:5px;">Pobierz</button>
                                <button id="clearDataButton" class="clear-btn" style="flex:1;background:#f44336;color:white;font-size:11px;padding:5px;">Wyczy≈õƒá</button>
                            </div>
                        </div>
                    </details>

                    
                </div>
            </div>

            <div class="calculator-content">
                <div id="chartContainer" class="chart-container">
                    <div id="myChart"></div>
                    <!-- RUCHOMY PANEL FULLSCREEN: wszystkie opcje w jednym miejscu -->
                    <div id="fsDock" class="fs-dock" aria-hidden="true">
                        <div id="fsDockHeader" class="fs-dock-header" title="PrzeciƒÖgnij, aby przenie≈õƒá panel">
                            <span style="font-weight:600;color:#0d47a1;">Panel pe≈Çnoekranowy</span>
                            <button id="fsDockToggle" class="fs-dock-toggle" title="Zwi≈Ñ/rozwi≈Ñ panel" aria-label="Zwi≈Ñ/rozwi≈Ñ">‚ñæ</button>
                            <span style="margin-left:auto;color:#90a4ae;cursor:move;">‚ãÆ‚ãÆ</span>
                        </div>
                        <div class="fs-dock-body">
                            <div class="fs-dock-section">
                                <div class="fs-range" id="fsRange">x:[‚Äî, ‚Äî] y:[‚Äî, ‚Äî]</div>
                                <div class="fs-actions">
                                    <button id="fsAutoFit" title="Dopasuj do danych">Auto‚Äëfit</button>
                                    <button id="fsReset" title="Reset widoku">Reset</button>
                                    <button id="fsReplot" title="Przerysuj z min/max">Rysuj zakres</button>
                                    <button id="fsExit" title="Wyjd≈∫ z pe≈Çnego ekranu">Wyjd≈∫</button>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="nav">
                                <div class="fs-dock-title">üß≠ Nawigacja</div>
                                <div class="fs-nav" aria-label="Nawigacja wykresu">
                                    <span></span>
                                    <button id="fsPanUp" title="Przesu≈Ñ w g√≥rƒô" aria-label="G√≥ra">‚Üë</button>
                                    <span></span>
                                    <button id="fsPanLeft" title="Przesu≈Ñ w lewo" aria-label="Lewo">‚Üê</button>
                                    <button id="fsZoomIn" title="Przybli≈º" aria-label="Przybli≈º">+</button>
                                    <button id="fsPanRight" title="Przesu≈Ñ w prawo" aria-label="Prawo">‚Üí</button>
                                    <span></span>
                                    <button id="fsPanDown" title="Przesu≈Ñ w d√≥≈Ç" aria-label="D√≥≈Ç">‚Üì</button>
                                    <button id="fsZoomOut" title="Oddal" aria-label="Oddal">‚àí</button>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="plot-mode">
                                <div class="fs-dock-title">üìä Tryb wykresu</div>
                                <div>
                                    <select id="fsPlotMode" style="width:100%;padding:8px;font-size:14px;">
                                        <option value="cartesian">Kartezja≈Ñski (y = f(x))</option>
                                        <option value="parametric">Parametryczny (x(t), y(t))</option>
                                        <option value="polar">Biegunowy (r(t))</option>
                                        <option value="3d">Powierzchnia 3D (z = f(x,y))</option>
                                    </select>
                                    <div id="fsModeHelper" class="mode-helper"></div>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="inputs">
                                <div class="fs-dock-title">Wzory i zakresy</div>
                                <!-- Dynamicznie wype≈Çniane polami dla aktywnego trybu -->
                                <div id="fsInputs" class="fs-inputs"></div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="params">
                                <div class="fs-dock-title">Parametry</div>
                                <div id="fsParams" class="fs-params"></div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="analysis">
                                <div class="fs-dock-title">üîç Analiza</div>
                                <div class="fs-grid-2">
                                    <label><input type="checkbox" id="fsZeros"> üéØ Miejsca zerowe</label>
                                    <label><input type="checkbox" id="fsExtrema"> ‚õ∞Ô∏è Ekstrema</label>
                                    <label><input type="checkbox" id="fsInflections"> üîÑ Punkty przegiƒôcia</label>
                                    <label><input type="checkbox" id="fsIntersections"> ‚úñÔ∏è Punkty przeciƒôcia</label>
                                    <label><input type="checkbox" id="fsDerivative"> üìà <span id="fsDerivativeLabelText">Rysuj/licz pochodnƒÖ</span></label>
                                    <label><input type="checkbox" id="fsTangent"> üìê Styczna/normalna (klik)</label>
                                    <label><input type="checkbox" id="fsParamClick"> „Ä∞Ô∏è T/N (parametryczny, klik)</label>
                                    <label><input type="checkbox" id="fsMonotonicity"> üìö Monotoniczno≈õƒá</label>
                                    <label><input type="checkbox" id="fsConcavity"> üúÇ Wklƒôs≈Ço≈õƒá/Wypuk≈Ço≈õƒá</label>
                                    <label><input type="checkbox" id="fsAsymptotes"> ‚ûó Asymptoty (pionowe)</label>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="integrals">
                                <div class="fs-dock-title">Ca≈Çki</div>
                                <div class="fs-inputs">
                                    <div class="fs-grid-2col" id="fsIntRangeRow">
                                        <div>
                                            <label for="fsIntA">a</label>
                                            <input type="text" id="fsIntA" placeholder="np. 0">
                                        </div>
                                        <div>
                                            <label for="fsIntB">b</label>
                                            <input type="text" id="fsIntB" placeholder="np. pi">
                                        </div>
                                    </div>
                                    <div id="fsIntegralControlsRow" style="display:flex;gap:8px;align-items:center;margin-top:6px;">
                                        <button id="fsIntegralButton" title="Oblicz ca≈Çkƒô i wizualizuj">Oblicz ca≈Çkƒô</button>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" id="fsBetweenSection" data-key="between">
                                <div class="fs-dock-title">Pole miƒôdzy krzywymi</div>
                                <div class="fs-inputs">
                                    <div class="fs-grid-2col">
                                        <div>
                                            <label for="fsBetweenA">a</label>
                                            <input type="text" id="fsBetweenA" placeholder="np. -1">
                                        </div>
                                        <div>
                                            <label for="fsBetweenB">b</label>
                                            <input type="text" id="fsBetweenB" placeholder="np. 1">
                                        </div>
                                    </div>
                                    <div style="display:flex;gap:8px;align-items:center;margin-top:6px;">
                                        <button id="fsBetweenButton" title="Oblicz pole miƒôdzy krzywymi">Oblicz pole</button>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="render">
                                <div class="fs-dock-title">‚öôÔ∏è Renderowanie</div>
                                <div class="fs-grid-2">
                                    <div>
                                        <label for="fsAngleMode" style="display:block;margin-bottom:6px;font-weight:500;">KƒÖty:</label>
                                        <select id="fsAngleMode" style="width:100%;padding:8px;">
                                            <option value="radians">Radiany</option>
                                            <option value="degrees">Stopnie</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="fsSamplingPreset" style="display:block;margin-bottom:6px;font-weight:500;">Dok≈Çadno≈õƒá:</label>
                                        <select id="fsSamplingPreset" style="width:100%;padding:8px;">
                                            <option value="default">Domy≈õlna</option>
                                            <option value="fast">Szybko</option>
                                            <option value="quality">Precyzyjna</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="margin-top:10px;">
                                    <label style="display:flex;align-items:center;cursor:pointer;">
                                        <input type="checkbox" id="fsPiAxis">&nbsp;O≈õ X w wielokrotno≈õciach œÄ
                                    </label>
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" data-key="appearance">
                                <div class="fs-dock-title">WyglƒÖd</div>
                                <div class="fs-grid-2">
                                    <label><input type="checkbox" id="fsLegend"> Legenda</label>
                                    <label><input type="checkbox" id="fsGrid" checked> Siatka</label>
                                    <label><input type="checkbox" id="fsZeroLines" checked> Osie 0</label>
                                    <label><input type="checkbox" id="fsTicks" checked> Opisy osi</label>
                                    <label><input type="checkbox" id="fsEqualAspect"> R√≥wna skala</label>
                                    <label><input type="checkbox" id="fsDark"> Ciemny motyw</label>
                                    <label><input type="checkbox" id="fsStartMinimizedMobile"> Startuj panel zminimalizowany (telefon)</label>
                                </div>
                                <div class="fs-slider">
                                    <span>Grubo≈õƒá linii</span>
                                    <input type="range" id="fsLineWidth" min="1" max="7" value="3">
                                </div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" id="fsAnalysisSection" data-key="results">
                                <div class="fs-dock-title">üìà Wyniki analizy</div>
                                <div id="fsAnalysisResultsContent" class="fs-analysis-content" style="font-size:12px;color:#37474f;line-height:1.6;"></div>
                            </div>
                            <hr>
                            <div class="fs-dock-section" id="fsHistorySection" data-key="history">
                                <div class="fs-dock-title">üïò Historia</div>
                                <div id="fsHistoryList" class="fs-history-list" style="background:#fff;border:1px solid #e0e0e0;border-radius:6px;padding:6px;"></div>
                                <button id="fsClearHistoryButton" style="margin-top:6px;">Wyczy≈õƒá historiƒô</button>
                            </div>
                            
                        </div>
                    </div>
                    <!-- Mobilny przycisk do chowania/otwierania panelu w fullscreen -->
                    <button id="fsMobileToggle" class="fs-mobile-toggle" title="Poka≈º/ukryj panel">‚ò∞</button>
                </div>
                <p id="errorDisplay"></p>
            </div>
            
            <!-- Prawy panel: wyniki i historia -->
            <div class="calculator-results" id="calculatorResults">
                <button id="resultsToggle" class="results-toggle" title="Zwi≈Ñ/rozwi≈Ñ panel wynik√≥w">‚óÄ</button>
                <div id="insightsToggle" class="insights">
                    <div class="insights-row">
                        <div id="analysisResults" class="analysis-results">
                            <h4>üìã Wyniki analizy</h4>
                            <div class="analysis-controls">
                                <button id="copyAnalysis" title="Skopiuj wyniki analizy">üìÑ Kopiuj</button>
                                <button id="openAnalysisModal" title="Poka≈º w oknie na ≈õrodku">ü™ü Otw√≥rz w oknie</button>
                            </div>
                            <div id="analysisResultsContent"></div>
                        </div>
                        <div id="historyPanel" class="history-panel">
                            <h4>üìú Historia</h4>
                            <div class="history-controls">
                                <button id="clearHistoryButton" title="Wyczy≈õƒá historiƒô">üóëÔ∏è Wyczy≈õƒá historiƒô</button>
                            </div>
                            <div class="history-body">
                                <div id="historyList"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- Loading indicator -->
        <div class="loading-indicator" id="loadingIndicator">
            <div class="loading-spinner"></div>
            <div class="loading-text">Obliczanie...</div>
        </div>

        <details class="help-section">
            <summary>Instrukcja obs≈Çugi i dostƒôpne funkcje</summary>
            <div class="help-content">
                <div class="help-column">
                    <h3>Jak korzystaƒá:</h3>
                    <ol>
                        <li>Wybierz tryb: kartezja≈Ñski, parametryczny, biegunowy lub 3D.</li>
                        <li>Uzupe≈Çnij pola funkcji: <strong>y=f(x)</strong>, <strong>x(t), y(t)</strong>, <strong>r(t)</strong> lub <strong>z(x,y)</strong>.</li>
                        <li>W polach liczbowych dozwolone sƒÖ wyra≈ºenia i œÄ, np. <code>2*pi</code>, <code>pi/3</code>, <code>25*2</code>.</li>
                        <li>Ustaw zakresy osi. Jednostki kƒÖt√≥w mo≈ºesz prze≈ÇƒÖczyƒá: <strong>Radiany/Stopnie</strong>.</li>
                        <li>Kliknij ‚ÄûRysuj wykres‚Äù. U≈ºyj ‚ÄûAuto‚Äëfit‚Äù do dopasowania widoku lub ‚ÄûReset widoku‚Äù.</li>
                        <li>W sekcji ‚ÄûAnaliza‚Äù w≈ÇƒÖczaj: miejsca zerowe, ekstrema, punkty przegiƒôcia oraz przeciƒôcia.</li>
                        <li>Ca≈Çka oznaczona: podaj <strong>a</strong>, <strong>b</strong> i kliknij ‚ÄûOblicz i zacieniuj‚Äù.
                            W trybie kartezja≈Ñskim dostƒôpne jest te≈º <strong>pole miƒôdzy krzywymi</strong>.</li>
                        <li>Tryb pe≈Çnoekranowy: kliknij przycisk fullscreen na pasku wykresu. W fullscreen masz <strong>panel dokowany</strong> z tymi samymi opcjami.
                            Na telefonie u≈ºyj przycisku <strong>‚ò∞</strong> (prawy dolny r√≥g), by pokazaƒá/ukryƒá panel.</li>
                        <li>Wyniki/Historia: przeciƒÖgnij pasek pod panelem, aby zmieniƒá jego wysoko≈õƒá (zapamiƒôtuje siƒô).</li>
                    </ol>

                    <h3>O≈õ i render:</h3>
                    <ul>
                        <li>O≈õ X w wielokrotno≈õciach œÄ (kartezja≈Ñski) ‚Äî prze≈ÇƒÖcznik w ‚ÄûRenderowanie‚Äù.</li>
                        <li>Dok≈Çadno≈õƒá pr√≥bkowania: <strong>Szybko / Domy≈õlna / Precyzyjna</strong>.</li>
                        <li>WyglƒÖd w fullscreen: legenda, siatka, osie 0, opisy osi, r√≥wna skala, grubo≈õƒá linii.</li>
                        <li>Motywy: prze≈ÇƒÖcznik <strong>deflatul</strong> (domy≈õlny dla nowych u≈ºytkownik√≥w) i szybki tryb ciemny w fullscreen.</li>
                        <li>Nawigacja: przyciski +/‚àí i strza≈Çki, przeciƒÖganie oraz zoom k√≥≈Çkiem.</li>
                    </ul>
                </div>

                <div class="help-column">
                    <h3>Sk≈Çadnia i funkcje:</h3>
                    <div class="function-grid">
                        <div class="function-item"><code>+</code><span>Dodawanie</span></div>
                        <div class="function-item"><code>-</code><span>Odejmowanie</span></div>
                        <div class="function-item"><code>*</code><span>Mno≈ºenie</span></div>
                        <div class="function-item"><code>/</code><span>Dzielenie</span></div>
                        <div class="function-item"><code>^</code><span>Potƒôgowanie</span></div>
                    </div>
                    <div class="function-grid" style="margin-top:10px;">
                        <div class="function-item"><code>sin(‚Ä¢)</code><span>Sinus</span></div>
                        <div class="function-item"><code>cos(‚Ä¢)</code><span>Cosinus</span></div>
                        <div class="function-item"><code>tan(‚Ä¢)</code><span>Tangens</span></div>
                        <div class="function-item"><code>sqrt(‚Ä¢)</code><span>Pierwiastek</span></div>
                        <div class="function-item"><code>abs(‚Ä¢)</code><span>Warto≈õƒá bezwzglƒôdna</span></div>
                        <div class="function-item"><code>log(‚Ä¢)</code><span>Logarytm (10)</span></div>
                        <div class="function-item"><code>ln(‚Ä¢)</code><span>Log. naturalny</span></div>
                        <div class="function-item"><code>exp(‚Ä¢)</code><span>e^x</span></div>
                    </div>
                    <ul style="margin-top:10px;">
                        <li>Zmienne: <code>x</code> (kartezja≈Ñski), <code>t</code> (parametryczny/biegunowy), <code>x,y</code> (3D).</li>
                        <li>W biegunowym u≈ºywamy <code>r(t)</code>, gdzie t = Œ∏.</li>
                        <li>Prze≈ÇƒÖcznik ‚ÄûKƒÖty‚Äù decyduje jak interpretowane sƒÖ t, Œ∏ oraz granice ca≈Çkowania.</li>
                    </ul>
                </div>

                <div class="help-column">
                    <h3>Ca≈Çki i przyk≈Çady:</h3>
                    <ul>
                        <li>Kartezja≈Ñski: <code>‚à´ f(x) dx</code> ‚Äî cieniowanie czƒô≈õci dodatnich/ujemnych.</li>
                        <li>Parametryczny: <code>‚à´ y(t) ¬∑ x'(t) dt</code> ‚Äî pod≈õwietlenie odcinka t‚àà[a,b].</li>
                        <li>Biegunowy: <code>¬Ω ‚à´ r(t)^2 dt</code> ‚Äî klin na wykresie.</li>
                        <li>Miƒôdzy krzywymi: pole na przedziale [a,b] dla f‚ÇÅ i f‚ÇÇ.</li>
                        <li>3D: <code>‚à¨ z(x,y) dA</code> po prostokƒÖcie (warto≈õƒá w panelu wynik√≥w).</li>
                    </ul>
                    <div class="example-grid" style="margin-top:10px;">
                        <div class="example-item" onclick="insertFunction('x^3 - 3*x')">
                            <code>x^3 - 3x</code>
                            <span>Kartezja≈Ñski (ekstrema i zera)</span>
                        </div>
                        <div class="example-item" onclick="insertFunction('t')">
                            <code>x(t)=t, y(t)=t^2</code>
                            <span>Parametryczny, t: -2‚Ä¶2</span>
                        </div>
                        <div class="example-item" onclick="insertFunction('0.2*t')">
                            <code>r(t)=0.2*t</code>
                            <span>Biegunowy, Œ∏: 0‚Ä¶~6.283</span>
                        </div>
                        <div class="example-item" onclick="insertFunction('x^2 + y^2')">
                            <code>z=x^2 + y^2</code>
                            <span>3D, paraboloida</span>
                        </div>
                    </div>
                    <ul style="margin-top:10px;">
                        <li>W granicach u≈ºywaj wyra≈ºe≈Ñ: <code>pi/2</code>, <code>3*pi</code>, <code>-pi</code> itd.</li>
                        <li>Wynik ca≈Çki mo≈ºesz pokazaƒá w panelu wynik√≥w; obszar jest wizualizowany na wykresie.</li>
                    </ul>
                    <h3 style="margin-top:14px;">Fullscreen i mobile:</h3>
                    <ul>
                        <li>Panel fullscreen mo≈ºna przeciƒÖgaƒá; nag≈Ç√≥wek jest przypiƒôty (sticky).</li>
                        <li>Na telefonie dostƒôpny jest przycisk <strong>‚ò∞</strong> do szybkiego chowania/pokazywania panelu.</li>
                        <li>Ustawienie ‚ÄûStartuj panel zminimalizowany (telefon)‚Äù zapisuje preferencjƒô.</li>
                        <li>W fullscreen kartezja≈Ñskim zakres automatycznie rozszerza siƒô, by pokazaƒá znaczniki analizy.</li>
                    </ul>
                </div>
            </div>
        </details>
    </div>
    


    
    <!-- Plotly: pin to a specific version for stability -->
    <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.js"></script>
    <!-- Initialize Plotly with 3D support -->
    <script>
        if (Plotly) {
            Plotly.setPlotConfig({
                responsive: true,
                displayModeBar: true,
                showSendToCloud: false,
                displaylogo: false,
                modeBarButtonsToRemove: ['lasso2d', 'select2d']
            });
        }
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <script src="script.js?v=20251031"></script>
    
    <!-- Modal: wyniki analizy (zawsze wycentrowane) -->
    <div id="analysisModal" class="modal-overlay" aria-hidden="true" style="display:none;">
        <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="analysisModalTitle">
            <div class="modal-header">
                <h4 id="analysisModalTitle">üìã Wyniki analizy</h4>
                <div class="modal-actions">
                    <button id="modalCopyAnalysis" title="Skopiuj wyniki">üìÑ Kopiuj</button>
                    <button id="modalCloseAnalysis" title="Zamknij okno" aria-label="Zamknij">‚úï</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="analysisModalContent" class="modal-content"></div>
            </div>
        </div>
    </div>
</body>
</html>